"use strict";

exports.__esModule = true;
exports.default = prerender;

var _universalEnv = require("universal-env");

var _index = require("./Navigation/index");

// prerender({path: '/page1'});
// prerender({href:'https://m.taobao.com'});
function prerender(config) {
  if (_universalEnv.isWeb) {
    if (config.path) {
      var routes = (0, _index.getRoutes)() || [];
      var targetRoute = routes.find(function (route) {
        return route.path === config.path;
      });

      if (targetRoute) {
        if (targetRoute.keepAlive) {
          setTimeout(function () {
            (0, _index.activatePageComponent)(targetRoute);
          }, 0);
        } else {
          // The page without keepAlive can't be injected in html, just load it.
          setTimeout(targetRoute.component, 0);
        }
      }
    } else if (config.href) {
      // https://www.w3.org/TR/resource-hints/#prerender
      var linkElement = document.createElement('link');
      linkElement.rel = 'prerender';
      linkElement.href = config.href;
      document.head.appendChild(linkElement);
    }
  } else {// It just only work in Web App for now
  }
}

;