import isPathMatched from './isPathMatched';

function getCurrentComponent(pagesConfig, withSSR) {
  var currentComponent = null;
  var pageNames = Object.keys(pagesConfig);

  for (var i = 0; i < pageNames.length; i++) {
    var currentPage = pagesConfig[pageNames[i]];

    if (isPathMatched(withSSR ? 'history' : 'hash', currentPage.regexp, pageNames[i])) {
      currentComponent = currentPage.component;
      break;
    }
  }

  if (currentComponent === null) {
    return function () {
      return new Promise(function (resolve) {
        resolve(null);
      });
    };
  }

  return currentComponent;
}

export default getCurrentComponent;